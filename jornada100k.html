<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jornada para 100k</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #fff;
        min-height: 100vh;
        padding: 20px;
        padding-left: 280px;
        display: flex;
      }

      /* SIDEBAR */
      .sidebar {
        width: 260px;
        background: white;
        height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        padding: 30px 0;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
        display: flex;
        flex-direction: column;
      }

      .logo {
        padding: 0 30px 30px;
        border-bottom: 1px solid #e8ecf1;
      }

      .logo h1 {
        font-size: 22px;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 4px;
      }

      .logo p {
        color: #95a5a6;
        font-size: 13px;
      }

      .nav-menu {
        flex: 1;
        padding: 30px 0;
      }

      .nav-item {
        padding: 14px 30px;
        color: #7f8c8d;
        cursor: pointer;
        font-size: 15px;
        font-weight: 500;
        transition: all 0.3s ease;
        border-left: 3px solid transparent;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .nav-item:hover {
        background: #f8f9fa;
        color: #2c3e50;
      }

      .nav-item.active {
        color: #3498db;
        background: #e8f4fd;
        border-left-color: #3498db;
      }

      .nav-icon {
        font-size: 18px;
        width: 24px;
        text-align: center;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        width: 100%;
      }

      h1 {
        text-align: center;
        color: #667eea;
        margin-bottom: 10px;
        font-size: 2.5em;
      }

      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 40px;
        font-size: 1.1em;
      }

      .progress-section {
        margin-bottom: 40px;
      }

      .progress-bar-container {
        background: #f0f0f0;
        height: 40px;
        border-radius: 20px;
        overflow: hidden;
        position: relative;
        margin: 20px 0;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 1s ease;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding-right: 15px;
        min-width: 60px;
      }

      .progress-text {
        color: white;
        font-weight: bold;
        font-size: 0.9em;
        white-space: nowrap;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .stat-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 25px;
        border-radius: 15px;
        color: white;
        text-align: center;
      }

      .stat-label {
        font-size: 0.9em;
        opacity: 0.9;
        margin-bottom: 10px;
      }

      .stat-value {
        font-size: 2em;
        font-weight: bold;
      }

      .recommendation-card {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
      }

      .warning-card {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .input-section {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 15px;
        margin: 20px 0;
      }

      .input-group {
        margin: 15px 0;
      }

      label {
        display: block;
        margin-bottom: 8px;
        color: #333;
        font-weight: 600;
      }

      input {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 1em;
        transition: border 0.3s;
      }

      input:focus {
        outline: none;
        border-color: #667eea;
      }

      button {
        width: 100%;
        padding: 15px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: transform 0.2s;
        margin-top: 10px;
      }

      button:hover {
        transform: translateY(-2px);
      }

      button:active {
        transform: translateY(0);
      }

      .emoji {
        font-size: 1.5em;
        margin-right: 10px;
      }

      .months-list {
        margin-top: 30px;
      }

      .month-item {
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        padding: 20px;
        margin: 15px 0;
        display: grid;
        grid-template-columns: 120px 1fr 150px;
        gap: 20px;
        align-items: center;
      }

      .month-item.completed {
        background: #f0f9ff;
        border-color: #667eea;
      }

      .month-item.current {
        background: #fff9e6;
        border-color: #ffa500;
        border-width: 3px;
      }

      .month-date {
        font-weight: bold;
        color: #667eea;
        font-size: 1.1em;
      }

      .month-input-wrapper {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .month-input-wrapper input {
        flex: 1;
        margin: 0;
      }

      .month-balance {
        text-align: right;
        font-size: 1.2em;
        font-weight: bold;
        color: #333;
      }

      .save-btn {
        padding: 8px 15px;
        width: auto;
        font-size: 0.9em;
        margin: 0;
      }

      .edit-btn {
        padding: 8px 15px;
        width: auto;
        font-size: 0.9em;
        margin: 0;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .month-status {
        font-size: 0.8em;
        color: #666;
        margin-top: 5px;
      }

      h3 {
        color: #333;
        margin: 20px 0 10px 0;
      }

      a {
        text-decoration: none;
        color: #7f8c8d;
      }

      .reset-btn {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <div class="sidebar">
      <div class="logo">
        <h1>üí∞ FinanceApp</h1>
        <p>Controle Financeiro</p>
      </div>

      <div class="nav-menu">
        <div class="nav-item" data-tab="dashboard">
          <span class="nav-icon">üìä</span>
          <a href="index.html">Dashboard</a>
        </div>
        <div class="nav-item" data-tab="budget">
          <span class="nav-icon">üìÖ</span>
          <span>Or√ßamento Di√°rio</span>
        </div>
        <div class="nav-item" data-tab="summary">
          <span class="nav-icon">üìà</span>
          <span>Resumo por Categoria</span>
        </div>
        <div class="nav-item" data-tab="investments">
          <span class="nav-icon">üíé</span>
          <span>Investimentos</span>
        </div>

        <div class="nav-item active" data-tab="jornada100k">
          <span class="nav-icon">üöÄ</span>
          <span>Jornada 100K</span>
        </div>
      </div>
    </div>

    <div class="container">
      <h1>üéØ Jornada para 100k</h1>
      <p class="subtitle">
        Acompanhamento m√™s a m√™s at√© sua liberdade financeira
      </p>

      <div class="progress-section">
        <h3>Progresso Atual</h3>
        <div class="progress-bar-container">
          <div class="progress-bar" id="progressBar">
            <span class="progress-text" id="progressText">0%</span>
          </div>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">Saldo Atual</div>
          <div class="stat-value" id="currentAmount">R$ 500</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Meta Final</div>
          <div class="stat-value">R$ 100.000</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Falta para Meta</div>
          <div class="stat-value" id="remaining">R$ 99.500</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Meses Restantes</div>
          <div class="stat-value" id="monthsRemaining">48</div>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card recommendation-card">
          <div class="stat-label">üí° Aporte Recomendado</div>
          <div class="stat-value" id="recommendedDeposit">R$ 2.000</div>
          <div class="stat-label" style="margin-top: 10px; font-size: 0.8em">
            Para manter o prazo
          </div>
        </div>
      </div>

      <div class="input-section">
        <h3><span class="emoji">‚öôÔ∏è</span>Configura√ß√µes Iniciais</h3>
        <div class="input-group">
          <label for="startingBalance">Saldo Inicial (R$)</label>
          <input type="number" id="startingBalance" value="500" min="0" />
        </div>
        <div class="input-group">
          <label for="targetMonths">Prazo Desejado (meses)</label>
          <input type="number" id="targetMonths" value="48" min="1" />
        </div>
        <button onclick="initialize()">Iniciar Planejamento</button>
        <button class="reset-btn" onclick="resetAll()">üîÑ Resetar Tudo</button>
      </div>

      <div class="months-list">
        <h3><span class="emoji">üìÖ</span>Registro Mensal de Aportes</h3>
        <div id="monthsContainer"></div>
      </div>
    </div>

    <script>
      let months = [];
      const goal = 100000;
      const cdiAnual = 0.105;
      const cdiMensal = Math.pow(1 + cdiAnual, 1 / 12) - 1;

      function initialize() {
        const startingBalance = parseFloat(
          document.getElementById("startingBalance").value
        );
        const targetMonths = parseInt(
          document.getElementById("targetMonths").value
        );

        months = [];
        const startDate = new Date(2026, 0); // Janeiro 2026

        for (let i = 0; i < targetMonths; i++) {
          const date = new Date(startDate);
          date.setMonth(date.getMonth() + i);

          months.push({
            date: date,
            dateStr: date.toLocaleDateString("pt-BR", {
              month: "short",
              year: "numeric",
            }),
            deposit: null,
            balance: 0,
            completed: false,
          });
        }

        saveData();
        calculate();
        renderMonths();
      }

      function calculate() {
        const startingBalance = parseFloat(
          document.getElementById("startingBalance").value
        );
        const targetMonths = months.length;

        let currentBalance = startingBalance;
        let completedMonths = 0;

        // Calcula o saldo baseado em TODOS os aportes (completos ou n√£o)
        for (let i = 0; i < months.length; i++) {
          if (months[i].deposit !== null) {
            const rate =
              currentBalance < 10000 ? cdiMensal * 1.2 : cdiMensal * 1.0;
            currentBalance = currentBalance * (1 + rate) + months[i].deposit;
            months[i].balance = currentBalance;

            if (months[i].completed) {
              completedMonths = i + 1;
            }
          } else {
            // Se n√£o tem aporte, mant√©m o saldo com rendimento apenas
            if (i > 0 && months[i - 1].balance > 0) {
              const rate =
                months[i - 1].balance < 10000
                  ? cdiMensal * 1.2
                  : cdiMensal * 1.0;
              currentBalance = months[i - 1].balance * (1 + rate);
            }
            break;
          }
        }

        // Calcula quanto precisa aportar nos meses restantes
        const monthsRemaining = targetMonths - completedMonths;
        let recommendedDeposit = 0;

        if (monthsRemaining > 0 && currentBalance < goal) {
          // Simula√ß√£o iterativa para encontrar o aporte necess√°rio
          let testDeposit = 1000;
          let testBalance = currentBalance;

          for (let attempt = 0; attempt < 100; attempt++) {
            testBalance = currentBalance;

            for (let i = 0; i < monthsRemaining; i++) {
              const rate =
                testBalance < 10000 ? cdiMensal * 1.2 : cdiMensal * 1.0;
              testBalance = testBalance * (1 + rate) + testDeposit;
            }

            if (Math.abs(testBalance - goal) < 100) {
              recommendedDeposit = testDeposit;
              break;
            }

            if (testBalance < goal) {
              testDeposit += 50;
            } else {
              testDeposit -= 25;
            }
          }
        }

        // Atualiza UI
        const progress = Math.min((currentBalance / goal) * 100, 100);
        document.getElementById("progressBar").style.width = progress + "%";
        document.getElementById("progressText").textContent =
          progress.toFixed(1) + "%";
        document.getElementById("currentAmount").textContent =
          "R$ " +
          currentBalance.toLocaleString("pt-BR", { minimumFractionDigits: 2 });
        document.getElementById("remaining").textContent =
          "R$ " +
          Math.max(0, goal - currentBalance).toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
          });
        document.getElementById("monthsRemaining").textContent =
          monthsRemaining;
        document.getElementById("recommendedDeposit").textContent =
          "R$ " +
          recommendedDeposit.toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
          });
      }

      function renderMonths() {
        const container = document.getElementById("monthsContainer");
        container.innerHTML = "";

        months.forEach((month, index) => {
          const item = document.createElement("div");
          item.className = "month-item";

          if (month.completed) {
            item.classList.add("completed");
          } else if (
            index === 0 ||
            (index > 0 && months[index - 1].completed)
          ) {
            item.classList.add("current");
          }

          const date = document.createElement("div");
          date.className = "month-date";
          date.textContent = month.dateStr;

          const inputWrapper = document.createElement("div");
          inputWrapper.className = "month-input-wrapper";

          const input = document.createElement("input");
          input.type = "number";
          input.placeholder = "Valor do aporte...";
          input.value = month.deposit !== null ? month.deposit : "";
          input.disabled = month.completed;
          input.id = "deposit-" + index;

          const saveBtn = document.createElement("button");
          saveBtn.textContent = month.completed ? "‚úì" : "Salvar";
          saveBtn.className = "save-btn";
          saveBtn.disabled = month.completed;
          saveBtn.onclick = () => saveMonth(index);

          inputWrapper.appendChild(input);
          inputWrapper.appendChild(saveBtn);

          // Bot√£o de editar para meses j√° salvos
          if (month.completed) {
            const editBtn = document.createElement("button");
            editBtn.textContent = "‚úèÔ∏è";
            editBtn.className = "edit-btn";
            editBtn.onclick = () => editMonth(index);
            inputWrapper.appendChild(editBtn);
          }

          const balance = document.createElement("div");
          balance.className = "month-balance";
          if (month.completed) {
            balance.textContent =
              "R$ " +
              month.balance.toLocaleString("pt-BR", {
                minimumFractionDigits: 2,
              });
          } else {
            balance.textContent = "-";
          }

          item.appendChild(date);
          item.appendChild(inputWrapper);
          item.appendChild(balance);

          container.appendChild(item);
        });
      }

      function saveMonth(index) {
        const input = document.getElementById("deposit-" + index);
        const value = parseFloat(input.value);

        if (isNaN(value) || value < 0) {
          alert("Por favor, insira um valor v√°lido!");
          return;
        }

        months[index].deposit = value;
        months[index].completed = true;

        saveData();
        calculate();
        renderMonths();
      }

      function editMonth(index) {
        if (confirm("Deseja editar o valor deste aporte?")) {
          // Apenas desmarca este m√™s para edi√ß√£o
          months[index].completed = false;

          saveData();
          calculate();
          renderMonths();
        }
      }

      function saveData() {
        const data = {
          months: months,
          startingBalance: document.getElementById("startingBalance").value,
        };
        const jsonData = JSON.stringify(data);
        // Simulando localStorage j√° que n√£o podemos usar no Claude
        window.investmentData = jsonData;
      }

      function loadData() {
        // Simulando localStorage j√° que n√£o podemos usar no Claude
        const saved = window.investmentData;
        if (saved) {
          const data = JSON.parse(saved);
          months = data.months.map((m) => ({
            ...m,
            date: new Date(m.date),
          }));
          document.getElementById("startingBalance").value =
            data.startingBalance;
          document.getElementById("targetMonths").value = months.length;
          calculate();
          renderMonths();
        } else {
          initialize();
        }
      }

      function resetAll() {
        if (
          confirm(
            "Tem certeza que deseja resetar todos os dados? Isso n√£o pode ser desfeito!"
          )
        ) {
          window.investmentData = null;
          location.reload();
        }
      }

      // Carrega dados ao iniciar
      loadData();
    </script>
  </body>
</html>
